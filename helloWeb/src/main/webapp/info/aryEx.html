<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>info/aryEx.html</title>
  </head>
  <body>
    <div id="show">
      <table border="1">
        <thead id="head"></thead>
        <tbody id="list"></tbody>
      </table>
    </div>

    <script>
      const titles = ["과일", "가격", "선호도"];

      titles.forEach((title, idx, ary) => {
        let th = document.createElement("th");
        th.innerText = title;
        head.append(th);
      });
      // fruits.reduce((acc, item, idx) => {
      //   let tr = document.createAttribute("tr");
      //   for (let prop in item) {
      //     let td = document.createElement("th");
      //     th.innerText = title;
      //     head.append(th);
      //   }
      // });
      // let result = fruit.reduce((acc,item,idx)=>{
      //   let tr = document.createElemen("tr");
      //   for(let prop in item ){
      //     let td = document.createElement("td")
      //     td.innerText = item[prop]
      //     te.append(td)
      //   }
      //   acc.append(tr)
      //   return acc;
      // },document.getElementById("list"));
      // console.log(result);

      console.log("aaa");
      const fruits = [
        { name: "apple", price: 300, like: 3.5 },
        { name: "banna", price: 100, like: 4.5 },
        { name: "cherry", price: 400, like: 5 },
      ];
      fruits.forEach((fruit, idx, ary) => {
        console.log(fruit.price);
        if (fruit.like >= 4) {
          let tr = document.createElement("tr");
          for (let prop in fruit) {
            //for..in 객체 속성 반복
            let td = document.createElement("td");
            td.innerText = fruit[prop];
            tr.append(td);
          }
          list.append(tr);
        }
      });

      //선호도 4이상 요소를 over4에 저장
      // forEach를 사용하게되면 if문도 사용하고 push를 통해서 값을 집어넣는 과정을 거처야한다.
      // let over4 = [];
      // fruits.forEach((fruit)=>{
      //   if(fruit.like>4){
      //     over4.push(fruit)
      //   }
      // })
      //filter함수 는 조건을 만족하는 값을 반환 해주는 함수
      over4 = fruits.filter((fruit) => fruit.like > 4);
      console.log(over4);
      document.querySelectorAll("#list tr").forEach((tr) => {
        tr.firstChild.style.backgroundColor = "yellow";
      });
      //map함수는
      let nFruits = fruits.map((fruit, idx) => {
        let nFruit = {};
        nFruit.ord = idx + 1;
        nFruit.fname = fruit.name;
        nFruit.price = fruit.price;
        return nFruit;
      });
      let t = fruits;
      console.log("map 함수:", nFruits);
      console.log(t);

      //fruit의 배열에 있는 가격의 합
      let priceSum = 0;
      fruits.forEach((fruit) => {
        priceSum += fruit.price;
      });
      console.log("가격의 합:", priceSum);
      // console.clear();

      //3건의 배역
      let result = fruits.reduce((accum, item, idx, ary) => {
        console.log(accum);
        console.log(item);
        console.log(idx);
        console.log(ary);
        return item;
      }, {});
      //합
      console.log(result);
      let results = fruits.reduce((accum, item, idx, ary) => {
        console.log(accum, item, idx, ary);
        return (accum += item.price);
      }, 0);
      console.log(results);

      //최대
      let result1 = fruits.reduce((accum, item, idx, ary) => {
        console.log(accum, item, idx, ary);
        return accum > item.price ? accum : item.price; //반환값이 다음 순번의 초기 (accum)
      }, 0);
      console.log(result1);
      //최소
      let result2 = fruits.reduce((accum, item, idx, ary) => {
        console.log(accum, item, idx, ary);
        return accum < item.price ? accum : item.price; //반환값이 다음 순번의 초기 (accum)
      }, 100000);
      console.log(result2);
      //최대 평점
      let result3 = fruits.reduce((accum, item, idx, ary) => {
        console.log(accum, item, idx, ary);
        return accum > item.like ? accum : item.like; //반환값이 다음 순번의 초기 (accum)
      }, 0);
      console.log(result3);

      //평점 평균 계산
      let result4 = fruits.reduce((accum, item, idx, ary) => {
        console.log(accum, item, idx, ary);
        accum += item.like;
        return accum;
      }, 0);
      console.log(result4);
    </script>
  </body>
</html>
